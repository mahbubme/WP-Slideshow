jQuery(document).ready((function(e){function s(){const s=[];return e("#sortable > li").each((function(){s.push(e(this).attr("data-id"))})),s}function i(s){e(s.target).parents("li.ui-state-default ").remove(),window.WPSlideshowWarningMessage()}e("#wp-slideshow-submit").on("click",(function(i){i.preventDefault(),e.ajax({url:wp_slideshow_admin.ajax_url,type:"POST",data:{action:"wp_slideshow_update_slider",nonce:wp_slideshow_admin.nonce,images:s()},success(){window.WPSlideshowSuccessMessage()},error(){window.WPSlideshowErrorMessage()}})})),e(".wp-slideshow-remove-image").on("click",(function(e){i(e)})),e("#wp-slideshow-upload-image").click((function(t){t.preventDefault();const n={uploaderTitle:wp_slideshow_admin.text_select_image,uploaderButton:wp_slideshow_admin.text_add_to_slider,multiple:!0},a=wp.media.frames.file_frame=wp.media({title:n.uploaderTitle,button:{text:n.uploaderButton},multiple:n.multiple});a.on("open",(function(){const e=a.state().get("selection");image_ids=s(),image_ids.forEach((function(s){attachment=wp.media.attachment(s),attachment.fetch(),e.add(attachment?[attachment]:[])}))})).open().on("select",(function(){var s;s=a.state().get("selection"),e("#sortable").empty(),s.forEach((function(s){const i=e("<img />").attr("src",s.attributes.sizes.thumbnail.url),t=`<li class="ui-state-default" data-id="${s.id}">${i[0].outerHTML}<div class="wp-slideshow-remove-image" data-id="${s.id}"><span class="dashicons dashicons-no-alt"></span></div></li>`;e("#sortable").append(t)})),e(".wp-slideshow-remove-image").on("click",(e=>{i(e)}))}))})),e((function(){e("#sortable").sortable({update(e,s){window.WPSlideshowWarningMessage()}}),e("#wp-slideshow-sortable-images").disableSelection()})),e("#wp-slideshow-upload-image").on("click",(function(){window.WPSlideshowWarningMessage()})),window.WPSlideshowWarningMessage=function(){e("#success-message").remove(),e("#warning-message").remove(),e("#error-message").remove(),e("#wp-slideshow-submit").after('\n        <div id="warning-message" class="notice notice-warning is-dismissible">\n            <p>'+wp_slideshow_admin.text_update_settings_warning+'</p>\n            <button type="button" class="notice-dismiss">\n                <span class="screen-reader-text">'+wp_slideshow_admin.text_dismiss_notice+"</span>\n            </button> \n        </div>")},window.WPSlideshowSuccessMessage=function(){e("#success-message").remove(),e("#warning-message").remove(),e("#error-message").remove(),e("#wp-slideshow-submit").after('\n        <div id="success-message" class="notice notice-success is-dismissible">\n            <p>'+wp_slideshow_admin.text_settings_updated+'</p>\n            <button type="button" class="notice-dismiss">\n                <span class="screen-reader-text">'+wp_slideshow_admin.text_dismiss_notice+"</span>\n            </button>\n        </div>")},window.WPSlideshowErrorMessage=function(){e("#success-message").remove(),e("#warning-message").remove(),e("#error-message").remove(),e("#wp-slideshow-submit").after('\n        <div id="error-message" class="error is-dismissible">\n            <p>'+wp_slideshow_admin.text_settings_cannot_update+'</p>\n            <button type="button" class="notice-dismiss">\n                <span class="screen-reader-text">'+wp_slideshow_admin.text_dismiss_notice+"</span>\n            </button>\n        </div>")}}));